d3.circularSlide=function(){function L(){}function P(e){if(g++==N){var r=H(A(d3.event.x,d3.event.y));if(r>=t/2&&r<=360-t/2){n=r;var i=O(n);var s=M(n);if(a!=s){a=s;window.dispatchEvent(new CustomEvent("slideValueChange",{detail:{value:a}}))}C.text(a);d3.select(this).attr("cx",i.x).attr("cy",i.y)}g=0}}function H(e){var n=t/2;if(e<=n&&n-e<5)return n;if(e>360-n&&e-(360-n)<5)return 360-n;return e}var e=30;var t=0;var n=t/2;var r;var i;var s=i-2*e;var o=s/2;var u=0;var a="";var f;var l;var c="yellow";var h="20";var p="orange";var d="10";var v="150px";var m="#616161";var g=0;var y="#FFFFF7";var b="#8C8C8C";var w=25;var E="white";var S="#3D3D3D";var x;var T=i/2;var N=1;var C;var k=function(e,t){this.x=e;this.y=t};L.decimals=function(e){if(!arguments.length)return u;u=e;return L};L.handleDiameter=function(e){if(!arguments.length)return parseInt(h);h=e.toString();return L};L.handleInnerColor=function(e){if(!arguments.length)return c;c=e;return L};L.handleStrokeColor=function(e){if(!arguments.length)return p;p=e;return L};L.handleStrokeThickness=function(e){if(!arguments.length)return parseInt(d);d=e.toString();return L};L.nullAngle=function(e){if(!arguments.length)return t;t=e;return L};L.nullAreaColor=function(e){if(!arguments.length)return S;S=e;return L};L.readingColor=function(e){if(!arguments.length)return m;m=e;return L};L.readingSize=function(e){if(!arguments.length)return v;v=e;return L};L.select=function(e){if(!arguments.length)return r;r=e;return L};L.size=function(e){if(!arguments.length)return i;i=e;return L};L.scaleFill=function(e){if(!arguments.length)return y;y=e;return L};L.scaleStrokeWidth=function(e){if(!arguments.length)return w;w=e;return L};L.val=function(e){if(!arguments.length)return a;a=e;return L};L.valueRangeMin=function(e){if(!arguments.length)return f;f=e;return L};L.valueRangeMax=function(e){if(!arguments.length)return l;l=e;return L};L.refresh=function(){T=i/2;s=i-2*e;o=s/2;x=l-f;n=_(a)};L.checkPreconditions=function(){if(r==null||i==null||f==null||l==null){throw"Mandatory setup not done. Check that following functions are called during initialization: select(), size(), valueRangeMin(), valueRangeMax()"}else if(a<f||a>l){throw"The value set with val() is out of valueRangeMin / valueRangeMax bounds."}};L.draw=function(){this.checkPreconditions();this.refresh();var e=d3.select(r).append("svg").attr("width",i).attr("height",i).selectAll("svg").data(d3.range(1).map(function(){return O(n)})).enter().append("svg");e.append("circle").attr("cx",T).attr("cy",T).attr("r",o).attr("fill",y).attr("stroke",b).attr("stroke-width",w);var s=d3.svg.arc().innerRadius(o-(w-2)/2).outerRadius(o+w/2).startAngle((0-t/2)*(Math.PI/180)).endAngle(t/2*Math.PI/180);e.append("path").attr("d",s).attr("transform","translate("+T+","+T+")").attr("fill",S);e.append("circle").attr("r",h).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).attr("stroke",p).attr("stroke-width",d).attr("fill",c).call(D);C=e.append("text").attr("x",T).attr("y",T).attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-family","arial").attr("font-weight","bold").attr("font-size",v).attr("fill",m).text(M(n))};var A=function(e,t){var n,r;if(e>=T&&t>=T){n=e-T;r=t-T;return 90+Math.atan(r/n)*(180/Math.PI)}else if(e<T&&t>=T){n=T-e;r=t-T;return 270-Math.atan(r/n)*(180/Math.PI)}else if(e<T&&t<T){n=T-e;r=T-t;return 360-Math.atan(n/r)*(180/Math.PI)}else if(e>=T&&t<T){n=e-T;r=T-t;return 90-Math.atan(r/n)*(180/Math.PI)}};var O=function(e){var t=new k;var n=(e-90)*(Math.PI/180);t.x=T+Math.cos(n)*o;t.y=T+Math.sin(n)*o;return t};var M=function(e){return parseFloat(x/(360-t)*(e-t/2)+f).toFixed(u)};var _=function(e){return parseFloat((360-t)/x*e+t/2).toFixed(u)};var D=d3.behavior.drag().on("drag",P);return L}